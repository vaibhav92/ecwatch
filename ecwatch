#!/bin/bash

################################################################################
# MIT License

# Copyright (c) 2019 Vaibhav

# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:

# The above copyright notice and this permission notice shall be included in all
# copies or substantial portions of the Software.

# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
# SOFTWARE.

################################################################################
# ECWatch : Indian general election 2019 watcher
# Description:
# Fetch and dump the general election results of a perticular constituency from
# the election commision results page
# (http://results.eci.gov.in/pc/en/partywise/index.htm)
# Usage:
# ecwatch [-l | -h | <constituency-name>]"
#	l: Lists the name of all possible constituencies
#	-h: Show this message
#	<constituency-name>: Any valid name from constituency list
#Author:
#Vaibhav Jain <ecwatch@vaibhajain.info>
################################################################################


declare -A CONSTITUENCIES
EC_URL="http://results.eci.gov.in/pc/en/constituencywise/Constituencywise"
################################################################################
# Array of all constituencies and their corresponding codes
################################################################################
CONSTITUENCIES["andaman & nicobar islands"]="U011"
CONSTITUENCIES["amalapuram"]="S017"
CONSTITUENCIES["anakapalli"]="S015"
CONSTITUENCIES["anantapur"]="S0119"
CONSTITUENCIES["aruku"]="S011"
CONSTITUENCIES["bapatla"]="S0115"
CONSTITUENCIES["chittoor"]="S0125"
CONSTITUENCIES["eluru"]="S0110"
CONSTITUENCIES["guntur"]="S0113"
CONSTITUENCIES["hindupur"]="S0120"
CONSTITUENCIES["kadapa"]="S0121"
CONSTITUENCIES["kakinada"]="S016"
CONSTITUENCIES["kurnool"]="S0118"
CONSTITUENCIES["machilipatnam"]="S0111"
CONSTITUENCIES["nandyal"]="S0117"
CONSTITUENCIES["narasaraopet"]="S0114"
CONSTITUENCIES["narsapuram"]="S019"
CONSTITUENCIES["nellore"]="S0122"
CONSTITUENCIES["ongole"]="S0116"
CONSTITUENCIES["rajahmundry"]="S018"
CONSTITUENCIES["rajampet"]="S0124"
CONSTITUENCIES["srikakulam"]="S012"
CONSTITUENCIES["tirupati"]="S0123"
CONSTITUENCIES["vijayawada"]="S0112"
CONSTITUENCIES["visakhapatnam"]="S014"
CONSTITUENCIES["vizianagaram"]="S013"
CONSTITUENCIES["arunachal east"]="S022"
CONSTITUENCIES["arunachal west"]="S021"
CONSTITUENCIES["autonomous district"]="S033"
CONSTITUENCIES["barpeta"]="S036"
CONSTITUENCIES["dhubri"]="S034"
CONSTITUENCIES["dibrugarh"]="S0313"
CONSTITUENCIES["gauhati"]="S037"
CONSTITUENCIES["jorhat"]="S0312"
CONSTITUENCIES["kaliabor"]="S0311"
CONSTITUENCIES["karimganj"]="S031"
CONSTITUENCIES["kokrajhar"]="S035"
CONSTITUENCIES["lakhimpur"]="S0314"
CONSTITUENCIES["mangaldoi"]="S038"
CONSTITUENCIES["nowgong"]="S0310"
CONSTITUENCIES["silchar"]="S032"
CONSTITUENCIES["tezpur"]="S039"
CONSTITUENCIES["araria"]="S049"
CONSTITUENCIES["arrah"]="S0432"
CONSTITUENCIES["aurangabad"]="S0437"
CONSTITUENCIES["banka"]="S0427"
CONSTITUENCIES["begusarai"]="S0424"
CONSTITUENCIES["bhagalpur"]="S0426"
CONSTITUENCIES["buxar"]="S0433"
CONSTITUENCIES["darbhanga"]="S0414"
CONSTITUENCIES["gaya (sc)"]="S0438"
CONSTITUENCIES["gopalganj (sc)"]="S0417"
CONSTITUENCIES["hajipur (sc)"]="S0421"
CONSTITUENCIES["jahanabad"]="S0436"
CONSTITUENCIES["jamui (sc)"]="S0440"
CONSTITUENCIES["jhanjharpur"]="S047"
CONSTITUENCIES["karakat"]="S0435"
CONSTITUENCIES["katihar"]="S0411"
CONSTITUENCIES["khagaria"]="S0425"
CONSTITUENCIES["kishanganj"]="S0410"
CONSTITUENCIES["madhepura"]="S0413"
CONSTITUENCIES["madhubani"]="S046"
CONSTITUENCIES["maharajganj"]="S0419"
CONSTITUENCIES["munger"]="S0428"
CONSTITUENCIES["muzaffarpur"]="S0415"
CONSTITUENCIES["nalanda"]="S0429"
CONSTITUENCIES["nawada"]="S0439"
CONSTITUENCIES["paschim champaran"]="S042"
CONSTITUENCIES["pataliputra"]="S0431"
CONSTITUENCIES["patna sahib"]="S0430"
CONSTITUENCIES["purnia"]="S0412"
CONSTITUENCIES["purvi champaran"]="S043"
CONSTITUENCIES["samastipur (sc)"]="S0423"
CONSTITUENCIES["saran"]="S0420"
CONSTITUENCIES["sasaram (sc)"]="S0434"
CONSTITUENCIES["sheohar"]="S044"
CONSTITUENCIES["sitamarhi"]="S045"
CONSTITUENCIES["siwan"]="S0418"
CONSTITUENCIES["supaul"]="S048"
CONSTITUENCIES["ujiarpur"]="S0422"
CONSTITUENCIES["vaishali"]="S0416"
CONSTITUENCIES["valmiki nagar"]="S041"
CONSTITUENCIES["chandigarh"]="U021"
CONSTITUENCIES["bastar"]="S2610"
CONSTITUENCIES["bilaspur"]="S265"
CONSTITUENCIES["durg"]="S267"
CONSTITUENCIES["janjgir-champa"]="S263"
CONSTITUENCIES["kanker"]="S2611"
CONSTITUENCIES["korba"]="S264"
CONSTITUENCIES["mahasamund"]="S269"
CONSTITUENCIES["raigarh"]="S262"
CONSTITUENCIES["raipur"]="S268"
CONSTITUENCIES["rajnandgaon"]="S266"
CONSTITUENCIES["sarguja"]="S261"
CONSTITUENCIES["dadra and nagar haveli"]="U031"
CONSTITUENCIES["daman & diu"]="U041"
CONSTITUENCIES["north goa"]="S051"
CONSTITUENCIES["south goa"]="S052"
CONSTITUENCIES["ahmedabad east"]="S067"
CONSTITUENCIES["ahmedabad west"]="S068"
CONSTITUENCIES["amreli"]="S0614"
CONSTITUENCIES["anand"]="S0616"
CONSTITUENCIES["banaskantha"]="S062"
CONSTITUENCIES["bardoli"]="S0623"
CONSTITUENCIES["bharuch"]="S0622"
CONSTITUENCIES["bhavnagar"]="S0615"
CONSTITUENCIES["chhota udaipur"]="S0621"
CONSTITUENCIES["dahod"]="S0619"
CONSTITUENCIES["gandhinagar"]="S066"
CONSTITUENCIES["jamnagar"]="S0612"
CONSTITUENCIES["junagadh"]="S0613"
CONSTITUENCIES["kachchh"]="S061"
CONSTITUENCIES["kheda"]="S0617"
CONSTITUENCIES["mahesana"]="S064"
CONSTITUENCIES["navsari"]="S0625"
CONSTITUENCIES["panchmahal"]="S0618"
CONSTITUENCIES["patan"]="S063"
CONSTITUENCIES["porbandar"]="S0611"
CONSTITUENCIES["rajkot"]="S0610"
CONSTITUENCIES["sabarkantha"]="S065"
CONSTITUENCIES["surat"]="S0624"
CONSTITUENCIES["surendranagar"]="S069"
CONSTITUENCIES["vadodara"]="S0620"
CONSTITUENCIES["valsad"]="S0626"
CONSTITUENCIES["ambala"]="S071"
CONSTITUENCIES["bhiwani-mahendragarh"]="S078"
CONSTITUENCIES["faridabad"]="S0710"
CONSTITUENCIES["gurgaon"]="S079"
CONSTITUENCIES["hisar"]="S074"
CONSTITUENCIES["karnal"]="S075"
CONSTITUENCIES["kurukshetra"]="S072"
CONSTITUENCIES["rohtak"]="S077"
CONSTITUENCIES["sirsa"]="S073"
CONSTITUENCIES["sonipat"]="S076"
CONSTITUENCIES["hamirpur"]="S083"
CONSTITUENCIES["kangra"]="S081"
CONSTITUENCIES["mandi"]="S082"
CONSTITUENCIES["shimla"]="S084"
CONSTITUENCIES["anantnag"]="S093"
CONSTITUENCIES["baramulla"]="S091"
CONSTITUENCIES["jammu"]="S096"
CONSTITUENCIES["ladakh"]="S094"
CONSTITUENCIES["srinagar"]="S092"
CONSTITUENCIES["udhampur"]="S095"
CONSTITUENCIES["chatra"]="S274"
CONSTITUENCIES["dhanbad"]="S277"
CONSTITUENCIES["dumka"]="S272"
CONSTITUENCIES["giridih"]="S276"
CONSTITUENCIES["godda"]="S273"
CONSTITUENCIES["hazaribagh"]="S2714"
CONSTITUENCIES["jamshedpur"]="S279"
CONSTITUENCIES["khunti"]="S2711"
CONSTITUENCIES["kodarma"]="S275"
CONSTITUENCIES["lohardaga"]="S2712"
CONSTITUENCIES["palamau"]="S2713"
CONSTITUENCIES["rajmahal"]="S271"
CONSTITUENCIES["ranchi"]="S278"
CONSTITUENCIES["singhbhum"]="S2710"
CONSTITUENCIES["bagalkot"]="S103"
CONSTITUENCIES["bangalore central"]="S1025"
CONSTITUENCIES["bangalore north"]="S1024"
CONSTITUENCIES["bangalore rural"]="S1023"
CONSTITUENCIES["bangalore south"]="S1026"
CONSTITUENCIES["belgaum"]="S102"
CONSTITUENCIES["bellary"]="S109"
CONSTITUENCIES["bidar"]="S107"
CONSTITUENCIES["bijapur"]="S104"
CONSTITUENCIES["chamarajanagar"]="S1022"
CONSTITUENCIES["chikkballapur"]="S1027"
CONSTITUENCIES["chikkodi"]="S101"
CONSTITUENCIES["chitradurga"]="S1018"
CONSTITUENCIES["dakshina kannada"]="S1017"
CONSTITUENCIES["davanagere"]="S1013"
CONSTITUENCIES["dharwad"]="S1011"
CONSTITUENCIES["gulbarga"]="S105"
CONSTITUENCIES["hassan"]="S1016"
CONSTITUENCIES["haveri"]="S1010"
CONSTITUENCIES["kolar"]="S1028"
CONSTITUENCIES["koppal"]="S108"
CONSTITUENCIES["mandya"]="S1020"
CONSTITUENCIES["mysore"]="S1021"
CONSTITUENCIES["raichur"]="S106"
CONSTITUENCIES["shimoga"]="S1014"
CONSTITUENCIES["tumkur"]="S1019"
CONSTITUENCIES["udupi chikmagalur"]="S1015"
CONSTITUENCIES["uttara kannada"]="S1012"
CONSTITUENCIES["alappuzha"]="S1115"
CONSTITUENCIES["alathur"]="S119"
CONSTITUENCIES["attingal"]="S1119"
CONSTITUENCIES["chalakudy"]="S1111"
CONSTITUENCIES["ernakulam"]="S1112"
CONSTITUENCIES["idukki"]="S1113"
CONSTITUENCIES["kannur"]="S112"
CONSTITUENCIES["kasaragod"]="S111"
CONSTITUENCIES["kollam"]="S1118"
CONSTITUENCIES["kottayam"]="S1114"
CONSTITUENCIES["kozhikode"]="S115"
CONSTITUENCIES["malappuram"]="S116"
CONSTITUENCIES["mavelikkara"]="S1116"
CONSTITUENCIES["palakkad"]="S118"
CONSTITUENCIES["pathanamthitta"]="S1117"
CONSTITUENCIES["ponnani"]="S117"
CONSTITUENCIES["thiruvananthapuram"]="S1120"
CONSTITUENCIES["thrissur"]="S1110"
CONSTITUENCIES["vadakara"]="S113"
CONSTITUENCIES["wayanad"]="S114"
CONSTITUENCIES["lakshadweep"]="U061"
CONSTITUENCIES["balaghat"]="S1215"
CONSTITUENCIES["betul"]="S1229"
CONSTITUENCIES["bhind"]="S122"
CONSTITUENCIES["bhopal"]="S1219"
CONSTITUENCIES["chhindwara"]="S1216"
CONSTITUENCIES["damoh"]="S127"
CONSTITUENCIES["dewas"]="S1221"
CONSTITUENCIES["dhar"]="S1225"
CONSTITUENCIES["guna"]="S124"
CONSTITUENCIES["gwalior"]="S123"
CONSTITUENCIES["hoshangabad"]="S1217"
CONSTITUENCIES["indore"]="S1226"
CONSTITUENCIES["jabalpur"]="S1213"
CONSTITUENCIES["khajuraho"]="S128"
CONSTITUENCIES["khandwa"]="S1228"
CONSTITUENCIES["khargone"]="S1227"
CONSTITUENCIES["mandla"]="S1214"
CONSTITUENCIES["mandsour"]="S1223"
CONSTITUENCIES["morena"]="S121"
CONSTITUENCIES["rajgarh"]="S1220"
CONSTITUENCIES["ratlam"]="S1224"
CONSTITUENCIES["rewa"]="S1210"
CONSTITUENCIES["sagar"]="S125"
CONSTITUENCIES["satna"]="S129"
CONSTITUENCIES["shahdol"]="S1212"
CONSTITUENCIES["sidhi"]="S1211"
CONSTITUENCIES["tikamgarh"]="S126"
CONSTITUENCIES["ujjain"]="S1222"
CONSTITUENCIES["vidisha"]="S1218"
CONSTITUENCIES["ahmadnagar"]="S1337"
CONSTITUENCIES["akola"]="S136"
CONSTITUENCIES["amravati"]="S137"
CONSTITUENCIES["aurangabad"]="S1319"
CONSTITUENCIES["baramati"]="S1335"
CONSTITUENCIES["beed"]="S1339"
CONSTITUENCIES["bhandara - gondiya"]="S1311"
CONSTITUENCIES["bhiwandi"]="S1323"
CONSTITUENCIES["buldhana"]="S135"
CONSTITUENCIES["chandrapur"]="S1313"
CONSTITUENCIES["dhule"]="S132"
CONSTITUENCIES["dindori"]="S1320"
CONSTITUENCIES["gadchiroli-chimur"]="S1312"
CONSTITUENCIES["hatkanangle"]="S1348"
CONSTITUENCIES["hingoli"]="S1315"
CONSTITUENCIES["jalgaon"]="S133"
CONSTITUENCIES["jalna"]="S1318"
CONSTITUENCIES["kalyan"]="S1324"
CONSTITUENCIES["kolhapur"]="S1347"
CONSTITUENCIES["latur"]="S1341"
CONSTITUENCIES["madha"]="S1343"
CONSTITUENCIES["maval"]="S1333"
CONSTITUENCIES["mumbai south"]="S1331"
CONSTITUENCIES["mumbai north"]="S1326"
CONSTITUENCIES["mumbai north central"]="S1329"
CONSTITUENCIES["mumbai north east"]="S1328"
CONSTITUENCIES["mumbai north west"]="S1327"
CONSTITUENCIES["mumbai south central"]="S1330"
CONSTITUENCIES["nagpur"]="S1310"
CONSTITUENCIES["nanded"]="S1316"
CONSTITUENCIES["nandurbar"]="S131"
CONSTITUENCIES["nashik"]="S1321"
CONSTITUENCIES["osmanabad"]="S1340"
CONSTITUENCIES["palghar"]="S1322"
CONSTITUENCIES["parbhani"]="S1317"
CONSTITUENCIES["pune"]="S1334"
CONSTITUENCIES["raigad"]="S1332"
CONSTITUENCIES["ramtek"]="S139"
CONSTITUENCIES["ratnagiri - sindhudurg"]="S1346"
CONSTITUENCIES["raver"]="S134"
CONSTITUENCIES["sangli"]="S1344"
CONSTITUENCIES["satara"]="S1345"
CONSTITUENCIES["shirdi"]="S1338"
CONSTITUENCIES["shirur"]="S1336"
CONSTITUENCIES["solapur"]="S1342"
CONSTITUENCIES["thane"]="S1325"
CONSTITUENCIES["wardha"]="S138"
CONSTITUENCIES["yavatmal-washim"]="S1314"
CONSTITUENCIES["inner manipur"]="S141"
CONSTITUENCIES["outer manipur"]="S142"
CONSTITUENCIES["shillong"]="S151"
CONSTITUENCIES["tura"]="S152"
CONSTITUENCIES["mizoram"]="S161"
CONSTITUENCIES["nagaland"]="S171"
CONSTITUENCIES["chandni chowk"]="U051"
CONSTITUENCIES["east delhi"]="U053"
CONSTITUENCIES["new delhi"]="U054"
CONSTITUENCIES["north east delhi"]="U052"
CONSTITUENCIES["north west delhi"]="U055"
CONSTITUENCIES["south delhi"]="U057"
CONSTITUENCIES["west delhi"]="U056"
CONSTITUENCIES["aska"]="S1819"
CONSTITUENCIES["balasore"]="S186"
CONSTITUENCIES["bargarh"]="S181"
CONSTITUENCIES["berhampur"]="S1820"
CONSTITUENCIES["bhadrak"]="S187"
CONSTITUENCIES["bhubaneswar"]="S1818"
CONSTITUENCIES["bolangir"]="S1810"
CONSTITUENCIES["cuttack"]="S1814"
CONSTITUENCIES["dhenkanal"]="S189"
CONSTITUENCIES["jagatsinghpur"]="S1816"
CONSTITUENCIES["jajpur"]="S188"
CONSTITUENCIES["kalahandi"]="S1811"
CONSTITUENCIES["kandhamal"]="S1813"
CONSTITUENCIES["kendrapara"]="S1815"
CONSTITUENCIES["keonjhar"]="S184"
CONSTITUENCIES["koraput"]="S1821"
CONSTITUENCIES["mayurbhanj"]="S185"
CONSTITUENCIES["nabarangpur"]="S1812"
CONSTITUENCIES["puri"]="S1817"
CONSTITUENCIES["sambalpur"]="S183"
CONSTITUENCIES["sundargarh"]="S182"
CONSTITUENCIES["puducherry"]="U071"
CONSTITUENCIES["amritsar"]="S192"
CONSTITUENCIES["anandpur sahib"]="S196"
CONSTITUENCIES["bathinda"]="S1911"
CONSTITUENCIES["faridkot"]="S199"
CONSTITUENCIES["fatehgarh sahib"]="S198"
CONSTITUENCIES["firozpur"]="S1910"
CONSTITUENCIES["gurdaspur"]="S191"
CONSTITUENCIES["hoshiarpur"]="S195"
CONSTITUENCIES["jalandhar"]="S194"
CONSTITUENCIES["khadoor sahib"]="S193"
CONSTITUENCIES["ludhiana"]="S197"
CONSTITUENCIES["patiala"]="S1913"
CONSTITUENCIES["sangrur"]="S1912"
CONSTITUENCIES["ajmer"]="S2013"
CONSTITUENCIES["alwar"]="S208"
CONSTITUENCIES["banswara"]="S2020"
CONSTITUENCIES["barmer"]="S2017"
CONSTITUENCIES["bharatpur"]="S209"
CONSTITUENCIES["bhilwara"]="S2023"
CONSTITUENCIES["bikaner (sc)"]="S202"
CONSTITUENCIES["chittorgarh"]="S2021"
CONSTITUENCIES["churu"]="S203"
CONSTITUENCIES["dausa"]="S2011"
CONSTITUENCIES["ganganagar"]="S201"
CONSTITUENCIES["jaipur"]="S207"
CONSTITUENCIES["jaipur rural"]="S206"
CONSTITUENCIES["jalore"]="S2018"
CONSTITUENCIES["jhalawar-baran"]="S2025"
CONSTITUENCIES["jhunjhunu"]="S204"
CONSTITUENCIES["jodhpur"]="S2016"
CONSTITUENCIES["karauli-dholpur"]="S2010"
CONSTITUENCIES["kota"]="S2024"
CONSTITUENCIES["nagaur"]="S2014"
CONSTITUENCIES["pali"]="S2015"
CONSTITUENCIES["rajsamand"]="S2022"
CONSTITUENCIES["sikar"]="S205"
CONSTITUENCIES["tonk-sawai madhopur"]="S2012"
CONSTITUENCIES["udaipur"]="S2019"
CONSTITUENCIES["sikkim"]="S211"
CONSTITUENCIES["arakkonam"]="S227"
CONSTITUENCIES["arani"]="S2212"
CONSTITUENCIES["chennai central"]="S224"
CONSTITUENCIES["chennai north"]="S222"
CONSTITUENCIES["chennai south"]="S223"
CONSTITUENCIES["chidambaram"]="S2227"
CONSTITUENCIES["coimbatore"]="S2220"
CONSTITUENCIES["cuddalore"]="S2226"
CONSTITUENCIES["dharmapuri"]="S2210"
CONSTITUENCIES["dindigul"]="S2222"
CONSTITUENCIES["erode"]="S2217"
CONSTITUENCIES["kallakurichi"]="S2214"
CONSTITUENCIES["kancheepuram"]="S226"
CONSTITUENCIES["kanniyakumari"]="S2239"
CONSTITUENCIES["karur"]="S2223"
CONSTITUENCIES["krishnagiri"]="S229"
CONSTITUENCIES["madurai"]="S2232"
CONSTITUENCIES["mayiladuthurai"]="S2228"
CONSTITUENCIES["nagapattinam"]="S2229"
CONSTITUENCIES["namakkal"]="S2216"
CONSTITUENCIES["nilgiris"]="S2219"
CONSTITUENCIES["perambalur"]="S2225"
CONSTITUENCIES["pollachi"]="S2221"
CONSTITUENCIES["ramanathapuram"]="S2235"
CONSTITUENCIES["salem"]="S2215"
CONSTITUENCIES["sivaganga"]="S2231"
CONSTITUENCIES["sriperumbudur"]="S225"
CONSTITUENCIES["tenkasi"]="S2237"
CONSTITUENCIES["thanjavur"]="S2230"
CONSTITUENCIES["theni"]="S2233"
CONSTITUENCIES["thiruvallur"]="S221"
CONSTITUENCIES["thoothukkudi"]="S2236"
CONSTITUENCIES["tiruchirappalli"]="S2224"
CONSTITUENCIES["tirunelveli"]="S2238"
CONSTITUENCIES["tiruppur"]="S2218"
CONSTITUENCIES["tiruvannamalai"]="S2211"
CONSTITUENCIES["viluppuram"]="S2213"
CONSTITUENCIES["virudhunagar"]="S2234"
CONSTITUENCIES["adilabad"]="S291"
CONSTITUENCIES["bhongir"]="S2914"
CONSTITUENCIES["chevella"]="S2910"
CONSTITUENCIES["hyderabad"]="S299"
CONSTITUENCIES["karimnagar"]="S293"
CONSTITUENCIES["khammam"]="S2917"
CONSTITUENCIES["mahabubabad"]="S2916"
CONSTITUENCIES["mahbubnagar"]="S2911"
CONSTITUENCIES["malkajgiri"]="S297"
CONSTITUENCIES["medak"]="S296"
CONSTITUENCIES["nagarkurnool"]="S2912"
CONSTITUENCIES["nalgonda"]="S2913"
CONSTITUENCIES["nizamabad"]="S294"
CONSTITUENCIES["peddapalle"]="S292"
CONSTITUENCIES["secundrabad"]="S298"
CONSTITUENCIES["warangal"]="S2915"
CONSTITUENCIES["zahirabad"]="S295"
CONSTITUENCIES["tripura east"]="S232"
CONSTITUENCIES["tripura west"]="S231"
CONSTITUENCIES["agra"]="S2418"
CONSTITUENCIES["akbarpur"]="S2444"
CONSTITUENCIES["aligarh"]="S2415"
CONSTITUENCIES["allahabad"]="S2452"
CONSTITUENCIES["ambedkar nagar"]="S2455"
CONSTITUENCIES["amethi"]="S2437"
CONSTITUENCIES["amroha"]="S249"
CONSTITUENCIES["aonla"]="S2424"
CONSTITUENCIES["azamgarh"]="S2469"
CONSTITUENCIES["badaun"]="S2423"
CONSTITUENCIES["baghpat"]="S2411"
CONSTITUENCIES["bahraich"]="S2456"
CONSTITUENCIES["ballia"]="S2472"
CONSTITUENCIES["banda"]="S2448"
CONSTITUENCIES["bansgaon"]="S2467"
CONSTITUENCIES["barabanki"]="S2453"
CONSTITUENCIES["bareilly"]="S2425"
CONSTITUENCIES["basti"]="S2461"
CONSTITUENCIES["bhadohi"]="S2478"
CONSTITUENCIES["bijnor"]="S244"
CONSTITUENCIES["bulandshahr"]="S2414"
CONSTITUENCIES["chandauli"]="S2476"
CONSTITUENCIES["deoria"]="S2466"
CONSTITUENCIES["dhaurahra"]="S2429"
CONSTITUENCIES["domariyaganj"]="S2460"
CONSTITUENCIES["etah"]="S2422"
CONSTITUENCIES["etawah"]="S2441"
CONSTITUENCIES["faizabad"]="S2454"
CONSTITUENCIES["farrukhabad"]="S2440"
CONSTITUENCIES["fatehpur"]="S2449"
CONSTITUENCIES["fatehpur sikri"]="S2419"
CONSTITUENCIES["firozabad"]="S2420"
CONSTITUENCIES["gautam buddha nagar"]="S2413"
CONSTITUENCIES["ghaziabad"]="S2412"
CONSTITUENCIES["ghazipur"]="S2475"
CONSTITUENCIES["ghosi"]="S2470"
CONSTITUENCIES["gonda"]="S2459"
CONSTITUENCIES["gorakhpur"]="S2464"
CONSTITUENCIES["hamirpur"]="S2447"
CONSTITUENCIES["hardoi"]="S2431"
CONSTITUENCIES["hathras"]="S2416"
CONSTITUENCIES["jalaun"]="S2445"
CONSTITUENCIES["jaunpur"]="S2473"
CONSTITUENCIES["jhansi"]="S2446"
CONSTITUENCIES["kairana"]="S242"
CONSTITUENCIES["kaiserganj"]="S2457"
CONSTITUENCIES["kannauj"]="S2442"
CONSTITUENCIES["kanpur"]="S2443"
CONSTITUENCIES["kaushambi"]="S2450"
CONSTITUENCIES["kheri"]="S2428"
CONSTITUENCIES["kushi nagar"]="S2465"
CONSTITUENCIES["lalganj"]="S2468"
CONSTITUENCIES["lucknow"]="S2435"
CONSTITUENCIES["machhlishahr"]="S2474"
CONSTITUENCIES["maharajganj"]="S2463"
CONSTITUENCIES["mainpuri"]="S2421"
CONSTITUENCIES["mathura"]="S2417"
CONSTITUENCIES["meerut"]="S2410"
CONSTITUENCIES["mirzapur"]="S2479"
CONSTITUENCIES["misrikh"]="S2432"
CONSTITUENCIES["mohanlalganj"]="S2434"
CONSTITUENCIES["moradabad"]="S246"
CONSTITUENCIES["muzaffarnagar"]="S243"
CONSTITUENCIES["nagina"]="S245"
CONSTITUENCIES["phulpur"]="S2451"
CONSTITUENCIES["pilibhit"]="S2426"
CONSTITUENCIES["pratapgarh"]="S2439"
CONSTITUENCIES["rae bareli"]="S2436"
CONSTITUENCIES["rampur"]="S247"
CONSTITUENCIES["robertsganj"]="S2480"
CONSTITUENCIES["saharanpur"]="S241"
CONSTITUENCIES["salempur"]="S2471"
CONSTITUENCIES["sambhal"]="S248"
CONSTITUENCIES["sant kabir nagar"]="S2462"
CONSTITUENCIES["shahjahanpur"]="S2427"
CONSTITUENCIES["shrawasti"]="S2458"
CONSTITUENCIES["sitapur"]="S2430"
CONSTITUENCIES["sultanpur"]="S2438"
CONSTITUENCIES["unnao"]="S2433"
CONSTITUENCIES["varanasi"]="S2477"
CONSTITUENCIES["almora"]="S283"
CONSTITUENCIES["garhwal"]="S282"
CONSTITUENCIES["hardwar"]="S285"
CONSTITUENCIES["nainital-udhamsingh nagar"]="S284"
CONSTITUENCIES["tehri garhwal"]="S281"
CONSTITUENCIES["alipurduars"]="S252"
CONSTITUENCIES["arambagh"]="S2529"
CONSTITUENCIES["asansol"]="S2540"
CONSTITUENCIES["baharampur"]="S2510"
CONSTITUENCIES["balurghat"]="S256"
CONSTITUENCIES["bangaon"]="S2514"
CONSTITUENCIES["bankura"]="S2536"
CONSTITUENCIES["barasat"]="S2517"
CONSTITUENCIES["bardhaman durgapur"]="S2539"
CONSTITUENCIES["bardhaman purba"]="S2538"
CONSTITUENCIES["barrackpore"]="S2515"
CONSTITUENCIES["basirhat"]="S2518"
CONSTITUENCIES["birbhum"]="S2542"
CONSTITUENCIES["bishnupur"]="S2537"
CONSTITUENCIES["bolpur"]="S2541"
CONSTITUENCIES["cooch behar"]="S251"
CONSTITUENCIES["darjeeling"]="S254"
CONSTITUENCIES["diamond harbour"]="S2521"
CONSTITUENCIES["dum dum"]="S2516"
CONSTITUENCIES["ghatal"]="S2532"
CONSTITUENCIES["hooghly"]="S2528"
CONSTITUENCIES["howrah"]="S2525"
CONSTITUENCIES["jadavpur"]="S2522"
CONSTITUENCIES["jalpaiguri"]="S253"
CONSTITUENCIES["jangipur"]="S259"
CONSTITUENCIES["jhargram"]="S2533"
CONSTITUENCIES["joynagar"]="S2519"
CONSTITUENCIES["kanthi"]="S2531"
CONSTITUENCIES["kolkata dakshin"]="S2523"
CONSTITUENCIES["kolkata uttar"]="S2524"
CONSTITUENCIES["krishnanagar"]="S2512"
CONSTITUENCIES["maldaha dakshin"]="S258"
CONSTITUENCIES["maldaha uttar"]="S257"
CONSTITUENCIES["mathurapur"]="S2520"
CONSTITUENCIES["medinipur"]="S2534"
CONSTITUENCIES["murshidabad"]="S2511"
CONSTITUENCIES["purulia"]="S2535"
CONSTITUENCIES["raiganj"]="S255"
CONSTITUENCIES["ranaghat"]="S2513"
CONSTITUENCIES["srerampur"]="S2527"
CONSTITUENCIES["tamluk"]="S2530"
CONSTITUENCIES["uluberia"]="S2526"

################################################################################
# Show usage
################################################################################
function usage {
    echo "Usage: $0 [-l | -h | <constituency-name>]"
    echo "-l: Lists the name of all possible constituencies."
    echo "-h: Show this message."
    echo "<constituency-name>: Any valid name from constituency list."
    echo
    echo "Author: Vaibhav Jain <ecwatch@vaibhajain.info>"
    exit 1
}
################################################################################
# Show list of all valid constituency names
################################################################################
function list {
    echo "Valid Constituencies:"
    for constituency in "${!CONSTITUENCIES[@]}";do
	echo "${constituency}"
    done
    exit 0
}


################################################################################
# Handle command line args
################################################################################
if [ "$#" -ne "1" ]; then
    echo "ERROR: Not enough arguments"
    usage
    
elif [ "$1" == "-l" ]; then
    list
    
elif [ "$1" == "-h" ]; then
    usage
    
elif [ "${1:0:1}" == "-" ]; then # unknown command
    echo "ERROR: Unknown command $1"
    usage
else
    #cleanup the requested name
    STR_CONSTITUENCY=$(tr "[:upper:]" "[:lower:]" <<< $1 |
			   tr -s '[:space:]' | sed 's/ and / \& /')
fi

#check if the constituency name is valid
if [ ${CONSTITUENCIES[${STR_CONSTITUENCY}]+_} ]; then
    CONSTITUENCY=${CONSTITUENCIES[${STR_CONSTITUENCY}]}
else
    echo "Error: Unknown constituency name \"$1\""
    echo "Please use command "$0 -l" to list valid names"
    exit 1
fi

_txt_result=$(mktemp -q)

echo -n "Fetching result..."
str_htm_results=$(wget -qO- "${EC_URL}${CONSTITUENCY}")

if [ "$?" -ne "0" ]; then
    echo "Error"
    exit 1
else
    echo "Ok"
fi

echo -n "Parsing.."
str_htmi_results=$(xmllint --nonet --html --dropdtd --recover --xpath "/html/body/div[2]/table/tbody/tr[4]/td/table[3]/tbody/tr[2]/td/table/tbody/tr/td/div/table[1]/tbody/tr[position() >= 4 and not(position() > 28)]" --format --xmlout <(echo ${str_htm_results})  2> /dev/null )

if [ "$?" -ne "0" ]; then
    echo "Error"
    exit 1
fi

str_constituency=$(xmllint --nonet --html --dropdtd --recover --xpath "/html/body/div[2]/table/tbody/tr[4]/td/table[3]/tbody/tr[2]/td/table/tbody/tr/td/div/table[1]/tbody/tr[1]/th/text()" --format --xmlout <(echo ${str_htm_results})  2>/dev/null | sed 's/&#13;//g')

if [ "$?" -ne "0" ]; then
    echo "Error"
    exit 1
fi

echo ${str_htmi_results} | xmllint --nonet --html --dropdtd --recover  --xpath "//tr[@style=\"font-size:12px;\"]/td[position()=2 or position()=3 or position()=6]/text()" - |
    awk '{printf "%s%s",$0,NR%3?",":"\n"}' | sort -r -nt',' -k 3 > ${_txt_result}

if [ "$?" -ne "0" ]; then
    echo "Error"
    exit 1
else
    echo "Ok"
fi
echo "================================================================================"
echo ${str_constituency}
echo "================================================================================"
cat ${_txt_result} | awk -F , '{printf "%2s:%-30s %-40s %-10s\n",NR,$1,$2,$3}'
